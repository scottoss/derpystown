import * as entities from '../../common/entities';
import * as fs from 'fs';
import { rect } from '../../common/rect';
import { TileType, MapType } from '../../common/interfaces';
import { createServerMap, deserializeMap } from '../serverMap';
import { World, goToMap } from '../world';
import { createSign } from '../controllerUtils';
import { ServerEntity } from '../serverInterfaces';
import { pathTo } from '../paths';
import {give,} from '../controllerUtils';


const mapData = JSON.parse(fs.readFileSync(pathTo('src', 'maps', 'discomap.json'), 'utf8'));


export function creatediscoMap(world: World) {
	const map = createServerMap('discomap', MapType.Disco, 6, 6, TileType.Wood);
	deserializeMap(map, mapData);

	map.spawnArea = rect(map.width / 2, map.height / 2, 0, 0);

	function add(entity: ServerEntity) {
		world.addEntity(entity, map);
	}

	add(createSign(map.width / 2, map.height / 2, 'Go to main', (_, client) => goToMap(world, client, '', 'spawn')));
	add (entities.fence3(22.09, 9.08));
add (entities.fence1(26.59, 9.13));
add (entities.table1(20.28, 7.00));
add (entities.table1(21.19, 6.88));
add (entities.table1(21.94, 6.92));
add (entities.table1(22.91, 7.00));
add (entities.table1(23.94, 6.92));
add (entities.table1(24.97, 6.88));
add (entities.table1(25.81, 6.83));
add (entities.table1(26.66, 6.92));
add (entities.cushion3(20.41, 5.04));
add (entities.cushion3(21.28, 5.04));
add (entities.cushion3(21.84, 5.13));
add (entities.cushion3(22.84, 5.13));
add (entities.cushion3(23.97, 5.13));
add (entities.cushion3(25.06, 5.13));
add (entities.cushion3(25.88, 5.04));
add (entities.cushion3(26.59, 5.13));
add (entities.table2(5.81, 9.00));
add (entities.table2(5.81, 4.25));
add (entities.cushion1(4.47, 3.29));
add (entities.cushion1(4.53, 4.83));
add (entities.cushion1(4.47, 7.83));
add (entities.cushion1(4.44, 9.29));
add (entities.cushion1(7.56, 9.63));
add (entities.cushion1(7.44, 7.92));
add (entities.cushion1(7.34, 4.83));
add (entities.cushion1(7.25, 3.25));
add (entities.cushion2(46.50, 20.25));
add (entities.cushion2(46.47, 21.21));
add (entities.cushion2(46.47, 22.46));
add (entities.cushion2(46.50, 23.67));
add (entities.cushion2(46.53, 24.50));
add (entities.cushion2(46.47, 21.96));
add (entities.table2(45.06, 20.33));
add (entities.table2(45.06, 22.17));
add (entities.table2(45.09, 24.21));
add (entities.cushion1(43.47, 20.96));
add (entities.cushion1(43.63, 23.04));
add (entities.cushion1(43.47, 24.63));
add (entities.cushion1(43.50, 19.42));
add (entities.boxFruits(45.19, 19.08));
add (entities.cookieTable2(45.19, 25.83));
add (entities.fence3(44.47, 31.00));
add (entities.fence3(32.94, 30.88));
add (entities.table1(4.69, 19.17));
add (entities.table1(4.69, 21.58));
add (entities.table1(7.56, 19.00));
add (entities.table1(7.50, 21.46));
add (entities.table1(4.75, 23.42));
add (entities.table1(7.50, 23.38));
add (entities.cushion1(8.44, 22.54));
add (entities.cushion1(8.44, 20.38));
add (entities.cushion1(8.41, 18.08));
add (entities.cushion1(5.53, 18.29));
add (entities.cushion1(6.59, 18.17));
add (entities.cushion1(6.56, 20.42));
add (entities.cushion1(5.72, 20.63));
add (entities.cushion1(6.63, 22.46));
add (entities.cushion1(5.69, 22.38));
add (entities.cushion1(3.56, 22.46));
add (entities.cushion1(3.69, 20.58));
add (entities.cushion1(3.75, 18.04));
add (entities.torchOn(10.38, 25.00));
add (entities.torchOn(10.09, 17.25));
add (entities.torchOn(0.69, 25.04));
add (entities.torchOn(1.13, 16.96));
add (entities.torchOn(41.97, 26.83));
add (entities.torchOn(42.06, 18.04));
add (entities.torchOn(47.31, 17.88));
add (entities.torchOn(47.41, 27.00));
add (entities.torchOn(47.22, 30.88));
add (entities.torchOn(43.44, 31.00));
add (entities.torchOn(33.91, 30.88));
add (entities.torchOn(30.19, 30.88));
add (entities.torchOn(47.28, 10.83));
add (entities.torchOn(41.38, 10.79));
add (entities.torchOn(36.13, 10.75));
add (entities.torchOn(35.91, 0.54));
add (entities.torchOn(35.97, 4.00));
add (entities.torchOn(27.59, 9.00));
add (entities.torchOn(24.88, 9.04));
add (entities.torchOn(19.31, 9.08));
add (entities.torchOn(23.06, 8.96));
add (entities.lanternOnTable(5.88, 9.21));
add (entities.lanternOnTable(5.94, 4.75));
add (entities.lanternOnTable(45.09, 20.50));
add (entities.lanternOnTable(45.13, 22.67));
add (entities.lanternOnTable(45.03, 24.38));
add (entities.torchOn(29.09, 38.79));
add (entities.torchOn(29.34, 46.63));
add (entities.torchOn(35.69, 38.88));
add (entities.torchOn(39.13, 35.79));
add (entities.torchOn(42.41, 38.88));
add (entities.torchOn(38.81, 42.75));
add (entities.torchOn(16.09, 41.17));
add (entities.torchOn(16.16, 27.83));
add (entities.torchOn(4.50, 27.71));
add (entities.torchOn(4.84, 40.96));
add (entities.boxLanterns(32.88, 10.58));
add (entities.boxLanterns(32.97, 26.29));
add (entities.crystals2(17.31, 14.58));
add (entities.crystals2(30.31, 14.33));
add (entities.crystals2(29.50, 28.08));
add (entities.crystals2(16.31, 27.75));
add (entities.crystals2(24.03, 12.04));
add (entities.crystals2(14.03, 20.71));
add (entities.crystals2(33.19, 20.46));
add (entities.crystals2(23.47, 30.17));
add (entities.crystals5(15.63, 17.13));
add (entities.crystals5(15.00, 25.08));
add (entities.crystals5(19.78, 29.58));
add (entities.crystals5(26.66, 29.54));
add (entities.crystals5(32.16, 17.25));
add (entities.crystals5(27.44, 11.92));
add (entities.crystals5(20.13, 12.79));
add (entities.crystals5(32.25, 24.83));
add (entities.fence3(13.50, 27.96));
add (entities.fence3(6.75, 27.96));
add (entities.fence3(14.09, 38.71));
add (entities.fence3(6.84, 38.92));
add (entities.cushion3(10.16, 32.46));
add (entities.cushion3(11.09, 32.75));
add (entities.cushion3(11.09, 32.46));
add (entities.cushion3(10.34, 33.33));
add (entities.cushion3(10.13, 33.38));
add (entities.cushion3(9.66, 33.08));
add (entities.cushion3(9.91, 33.29));
add (entities.cushion3(10.31, 33.29));
add (entities.cushion3(10.72, 32.67));
add (entities.cushion3(10.97, 32.38));
add (entities.cushion3(11.22, 32.46));
add (entities.cushion3(10.97, 33.25));
add (entities.cushion3(10.72, 33.79));
add (entities.cushion3(10.00, 33.33));
add (entities.cushion3(9.19, 32.75));
add (entities.cushion3(9.16, 32.42));
add (entities.cushion3(9.84, 32.21));
add (entities.cushion3(10.28, 32.29));
add (entities.cushion3(10.59, 32.04));
add (entities.cushion3(11.25, 32.04));
add (entities.cushion3(11.34, 32.04));
add (entities.cushion3(11.38, 32.25));
add (entities.cushion3(11.28, 32.75));
add (entities.cushion3(11.16, 33.38));
add (entities.cushion3(11.19, 33.50));
add (entities.cushion3(10.94, 33.67));
add (entities.cushion3(9.72, 33.38));
add (entities.cushion3(9.22, 32.46));
add (entities.cushion3(9.31, 31.92));
add (entities.cushion3(9.44, 31.92));
add (entities.cushion3(9.63, 32.04));
add (entities.cushion3(9.78, 31.83));
add (entities.cushion3(10.63, 31.58));
add (entities.cushion3(10.63, 31.58));
add (entities.cushion3(10.91, 31.42));
add (entities.cushion3(11.19, 31.67));
add (entities.cushion3(11.19, 31.71));
add (entities.cushion3(9.78, 31.42));
add (entities.cushion3(9.78, 31.42));
add (entities.cushion3(9.78, 31.42));
add (entities.cushion3(9.63, 31.33));
add (entities.cushion3(9.59, 31.33));
add (entities.cushion3(11.69, 31.83));
add (entities.spawnPole(10.50, 32.63));
add (entities.stoneWallBeamV1(79.00, 47.63));
add (entities.stoneWallBeamV1(79.03, 49.75));
add (entities.stoneWallBeamV1(83.94, 49.75));
add (entities.stoneWallBeamV1(83.94, 47.38));
add (entities.stoneWallBeamV1(3.91, 28.75));
add (entities.stoneWallBeamV1(3.91, 28.25));
add (entities.stoneWallBeamV1(16.25, 28.04));
add (entities.stoneWallBeamV1(16.28, 29.58));
add (entities.cushion1(15.31, 36.13));
add (entities.cushion1(5.53, 36.04));
add (entities.cushion1(5.56, 33.04));
add (entities.cushion1(15.38, 33.13));
add (entities.cushion1(12.69, 35.96));
add (entities.cushion1(8.50, 35.96));
add (entities.table1(6.41, 37.00));
add (entities.table1(14.28, 36.88));
add (entities.crystals7(23.53, 33.33));
add (entities.crystals7(23.41, 36.71));
add (entities.crystals7(23.47, 40.75));
add (entities.crystals7(11.25, 20.75));
add (entities.crystals1(24.03, 23.88));
add (entities.crystals1(36.59, 20.29));
add (entities.crystals1(39.44, 20.17));
add (entities.crystals1(32.84, 11.75));
add (entities.crystals1(16.50, 11.79));
add (entities.firefly(22.19, 13.63));
add (entities.firefly(25.72, 13.38));
add (entities.firefly(28.69, 14.46));
add (entities.firefly(31.16, 17.54));
add (entities.firefly(32.56, 20.67));
add (entities.firefly(32.69, 24.17));
add (entities.firefly(31.13, 27.75));
add (entities.firefly(28.00, 30.08));
add (entities.firefly(25.25, 31.83));
add (entities.firefly(21.56, 31.13));
add (entities.firefly(17.97, 29.92));
add (entities.firefly(15.66, 27.71));
add (entities.firefly(14.38, 24.63));
add (entities.firefly(14.78, 19.92));
add (entities.firefly(16.53, 16.71));
add (entities.firefly(18.63, 14.50));
add (entities.firefly(14.47, 29.04));
add (entities.firefly(12.41, 29.04));
add (entities.firefly(10.63, 28.96));
add (entities.firefly(9.56, 29.04));
add (entities.firefly(7.75, 28.83));
add (entities.firefly(5.75, 28.67));
add (entities.firefly(3.84, 28.71));
add (entities.firefly(20.34, 8.33));
add (entities.firefly(26.53, 8.38));
add (entities.firefly(23.50, 8.08));
add (entities.eyes(44.16, 8.75));
add (entities.eyes(44.50, 7.96));
add (entities.eyes(44.00, 8.42));
add (entities.eyes(44.38, 7.58));
add (entities.eyes(44.16, 8.08));
add (entities.eyes(44.56, 8.63));
add (entities.eyes(38.94, 8.71));
add (entities.eyes(38.88, 7.58));
add (entities.eyes(38.47, 8.08));
add (entities.eyes(38.44, 8.83));
add (entities.eyes(38.94, 8.21));
add (entities.eyes(35.78, 5.04));
add (entities.eyes(35.66, 4.33));
add (entities.eyes(36.19, 3.96));
add (entities.eyes(36.28, 4.63));
add (entities.eyes(35.38, 4.92));
add (entities.eyes(13.41, 12.71));
add (entities.eyes(13.25, 10.96));
add (entities.eyes(12.38, 12.75));
add (entities.eyes(13.13, 11.79));
add (entities.eyes(12.44, 11.54));
add (entities.eyes(13.28, 11.33));
add (entities.eyes(12.91, 9.29));
add (entities.eyes(13.72, 13.42));
add (entities.eyes(12.84, 4.38));
add (entities.eyes(13.16, 2.83));
add (entities.eyes(13.59, 3.54));
add (entities.eyes(13.44, 5.17));
add (entities.eyes(13.84, 4.50));
add (entities.eyes(12.13, 5.46));
add (entities.eyes(5.81, 13.00));
add (entities.eyes(6.69, 13.08));
add (entities.eyes(5.94, 11.42));
add (entities.eyes(6.41, 12.25));
add (entities.eyes(5.03, 13.54));
add (entities.eyes(1.31, 13.29));
add (entities.eyes(0.94, 11.00));
add (entities.eyes(0.63, 12.33));
add (entities.eyes(1.31, 11.92));
add (entities.eyes(0.78, 13.00));
add (entities.eyes(0.81, 9.83));




	
	add(createSign(45, 27, 'muffin dispenser sign', give(entities.muffin.type, `Here's your muffin!`), entities.sign));

	
	return map;
}
